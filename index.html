<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ§  HafÄ±za Oyunu Deluxe</title>
<style>
  :root {
    --accent:#f77f00;
    --bg-a:#ff6f61; --bg-b:#6a5acd; --bg-c:#00b4d8; --bg-d:#ffd166;
  }
  html,body {
    margin:0; padding:0; height:100%;
    font-family: Arial, Helvetica, sans-serif; color:#fff;
    overflow:hidden;
  }

  /* ğŸ§  MenÃ¼ & Overlay */
  .overlay {
    position:fixed; inset:0; display:flex; flex-direction:column;
    justify-content:center; align-items:center; text-align:center;
    background:rgba(0,0,0,.45); backdrop-filter: blur(8px);
    gap:14px; z-index:5;
    opacity:0; visibility:hidden;
    transition: opacity .4s ease, visibility .4s ease;
  }
  .overlay.show {
    opacity:1; visibility:visible;
  }
  .menu-btn {
    background:var(--accent); color:#fff; border:none; cursor:pointer;
    padding:12px 22px; border-radius:12px; font-size:18px; width:220px;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
  }

  /* Ãœst bar */
  #header {
    position:sticky; top:0; z-index:4; display:none;
    background: rgba(0,0,0,.55); backdrop-filter: blur(6px);
    padding:10px; display:flex; gap:10px; align-items:center; justify-content:center;
  }
  .badge {
    display:inline-flex; align-items:center; gap:8px;
    background:#00000066; border:1px solid #ffffff29;
    padding:6px 10px; border-radius:999px; font-weight:700; font-size:14px;
  }
  .sound-btn, .pause-btn {
    margin-left:8px; background:#ffffff22; border:1px solid #ffffff33; color:#fff;
    padding:6px 10px; border-radius:999px; cursor:pointer; font-size:14px;
  }

  /* Oyun alanÄ± */
  #board {
    display:none;
    grid-template-columns: repeat(3, 1fr);
    gap:10px; padding:12px; justify-items:center;
    height: calc(100dvh - 70px); overflow-y:auto;
    position: relative; z-index: 3;
  }
  .card {
    width:30vw; max-width:120px; aspect-ratio:1/1;
    border-radius:14px; overflow:hidden; cursor:pointer; perspective:900px;
    position:relative;
    border: 4px solid #fff;
    box-shadow: 0 0 12px rgba(0,0,0,.5);
  }
  .inner {
    width:100%; height:100%; transform-style:preserve-3d;
    transition: transform .38s cubic-bezier(.2,.8,.2,1), filter .2s;
  }
  .flipped .inner { transform: rotateY(180deg); }
  .front,.back {
    position:absolute; inset:0; backface-visibility:hidden; border-radius:14px;
  }
  .front { transform: rotateY(180deg);}
  .front img { width:100%; height:100%; object-fit:cover; }
  .back {
    background-color:#d62828;
    background-image:
      repeating-linear-gradient(45deg, #fff 0px, #fff 3px, transparent 3px, transparent 10px),
      repeating-linear-gradient(-45deg, #fff 0px, #fff 3px, transparent 3px, transparent 10px);
    background-size:20px 20px; border:2px solid #fff;
  }
  .matched {
    pointer-events:none; border:3px solid #32d74b; filter:brightness(1.3);
    animation: zoomFlash .6s ease both;
  }
  @keyframes zoomFlash {
    0%{ transform: scale(1)}
    40%{ transform: scale(1.25); box-shadow:0 0 18px #32d74b}
    100%{ transform: scale(1); box-shadow:none}
  }

  /* ğŸ‰ Kutlama */
  #celebration {
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    font-size:28px; background:rgba(0,0,0,.6); z-index:10;
  }

  /* ğŸŠ Konfeti Canvas */
  #confettiCanvas {
    position:fixed; inset:0; pointer-events:none; z-index:11; display:none;
  }

  /* ğŸŒˆ KatmanlÄ± Arka Plan */
  #gradient, #bubbles, #shimmer {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    display: block;
  }
  #gradient { z-index: 0; }
  #bubbles { z-index: 1; opacity: 0.45; }
  #shimmer { z-index: 2; opacity: 0.35; }
</style>
</head>
<body>

<!-- ğŸŒˆ 3 KatmanlÄ± Arka Plan -->
<canvas id="gradient"></canvas>
<canvas id="bubbles"></canvas>
<canvas id="shimmer"></canvas>

<!-- ğŸ“Œ Ana MenÃ¼ -->
<section id="menu" class="overlay show">
  <h1>ğŸ§  HafÄ±za Oyunu Deluxe</h1>
  <button class="menu-btn" id="startBtn">ğŸ® Oyuna BaÅŸla</button>
  <button class="menu-btn" id="showLeaderboardBtn">ğŸ† Lider Tablosu</button>
</section>

<!-- ğŸ•¹ Oyun Ã¼st bar -->
<header id="header">
  <div class="badge">Seviye: <span id="levelDisplay">1</span></div>
  <div class="badge">Puan: <span id="scoreDisplay">0</span></div>
  <button class="pause-btn" id="pauseBtn">â¸ Durdur</button>
  <button class="sound-btn" id="soundToggle">ğŸ”Š Ses: AÃ§Ä±k</button>
</header>

<!-- ğŸ§  Oyun alanÄ± -->
<main id="board"></main>

<!-- ğŸ›‘ Duraklatma menÃ¼sÃ¼ -->
<section id="pauseMenu" class="overlay">
  <h2>â¸ Oyun Durdu</h2>
  <button class="menu-btn" id="resumeBtn">â–¶ Devam Et</button>
  <button class="menu-btn" id="restartBtn">ğŸ”„ Yeni Oyun</button>
  <button class="menu-btn" id="exitBtn">ğŸšª Ã‡Ä±k</button>
</section>

<!-- ğŸ† Lider tablosu popup -->
<section id="leaderboardPopup" class="overlay">
  <h2>ğŸ† Lider Tablosu</h2>
  <ol id="leaderList"></ol>
  <button class="menu-btn" id="closeLeaderboard">Kapat</button>
</section>

<!-- ğŸ‰ Kutlama -->
<div id="celebration">ğŸ‰ Tebrikler! Ä°lk 5'e girdiniz! ğŸ…</div>

<!-- ğŸŠ Konfeti Canvas -->
<canvas id="confettiCanvas"></canvas>

<!-- ğŸ”Š Sesler -->
<audio id="flipSound" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5d0c1c3b4b.mp3?filename=pop-94319.mp3"></audio>
<audio id="matchSound" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d4d86a64f7.mp3?filename=soft-notification-102131.mp3"></audio>
<audio id="levelUpSound" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2d8a6e8241.mp3?filename=success-1-6297.mp3"></audio>

<script>
/* ğŸŒˆ Alt Katman - Degrade AkÄ±ÅŸÄ± */
const gradientCanvas = document.getElementById('gradient');
const gctx = gradientCanvas.getContext('2d');
function resizeGradient(){ gradientCanvas.width=innerWidth; gradientCanvas.height=innerHeight; }
window.addEventListener('resize',resizeGradient); resizeGradient();
let gradColors=[[255,111,97],[106,90,205],[0,180,216],[255,209,102]]; let t=0;
function drawGradient(){
  let w=gradientCanvas.width,h=gradientCanvas.height;
  let grd=gctx.createLinearGradient(0,0,w,h);
  for(let i=0;i<gradColors.length;i++){ let c=gradColors[i]; grd.addColorStop(i/(gradColors.length-1),`rgb(${c[0]},${c[1]},${c[2]})`);}
  gctx.fillStyle=grd; gctx.fillRect(0,0,w,h);
  if(t%3===0) gradColors.push(gradColors.shift()); t++;
  requestAnimationFrame(drawGradient);
}
drawGradient();

/* ğŸ«§ Orta Katman - Baloncuklar */
const bubbleCanvas=document.getElementById('bubbles');
const bctx=bubbleCanvas.getContext('2d');
function resizeBubbles(){bubbleCanvas.width=innerWidth;bubbleCanvas.height=innerHeight;}
window.addEventListener('resize',resizeBubbles);resizeBubbles();
const bubbles=Array.from({length:40},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*10+4,s:Math.random()*0.6+0.2,a:Math.random()*0.4+0.2}));
function drawBubbles(){
  bctx.clearRect(0,0,bubbleCanvas.width,bubbleCanvas.height);
  bubbles.forEach(b=>{
    bctx.beginPath();bctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    bctx.fillStyle=`rgba(255,255,255,${b.a})`;bctx.fill();
    b.y-=b.s;if(b.y+b.r<0){b.y=bubbleCanvas.height+b.r;b.x=Math.random()*bubbleCanvas.width;}
  });
  requestAnimationFrame(drawBubbles);
}
drawBubbles();

/* âœ¨ Shimmer KatmanÄ± */
const shimmerCanvas=document.getElementById('shimmer');const sctx=shimmerCanvas.getContext('2d');
function resizeShimmer(){shimmerCanvas.width=innerWidth;shimmerCanvas.height=innerHeight;}
window.addEventListener('resize',resizeShimmer);resizeShimmer();
let shimmerX=-shimmerCanvas.width;
function drawShimmer(){
  sctx.clearRect(0,0,shimmerCanvas.width,shimmerCanvas.height);
  let grd=sctx.createLinearGradient(shimmerX,0,shimmerX+shimmerCanvas.width/2,shimmerCanvas.height);
  grd.addColorStop(0,'rgba(255,255,255,0)');
  grd.addColorStop(0.5,'rgba(255,255,255,0.25)');
  grd.addColorStop(1,'rgba(255,255,255,0)');
  sctx.fillStyle=grd;sctx.fillRect(0,0,shimmerCanvas.width,shimmerCanvas.height);
  shimmerX+=0.8;if(shimmerX>shimmerCanvas.width)shimmerX=-shimmerCanvas.width;
  reques
