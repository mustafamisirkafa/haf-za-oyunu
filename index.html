<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üß† Hafƒ±za E≈üle≈ütirme ‚Äî Durdurmalƒ± Versiyon</title>
<style>
  :root {
    --accent:#f77f00;
    --bg-a:#ff6f61; --bg-b:#6a5acd; --bg-c:#00b4d8; --bg-d:#ffd166;
  }
  html,body {
    margin:0; padding:0; height:100%;
    font-family: Arial, Helvetica, sans-serif; color:#fff;
    overflow-x:hidden; background:#111;
  }
  body {
    background: linear-gradient(270deg,var(--bg-a),var(--bg-b),var(--bg-c),var(--bg-d));
    background-size: 800% 800%;
    animation: gradientFlow 24s ease infinite;
  }
  @keyframes gradientFlow {
    0% { background-position: 0% 50% }
    50% { background-position: 100% 50% }
    100% { background-position: 0% 50% }
  }
  canvas#bubbles {
    position:fixed; inset:0; width:100%; height:100%;
    z-index:0; pointer-events:none;
    opacity:.6;
  }
  /* Men√º */
  #menu {
    position:fixed; inset:0; display:flex; flex-direction:column; gap:14px;
    justify-content:center; align-items:center; text-align:center;
    background:rgba(0,0,0,.45); backdrop-filter: blur(8px); z-index:5;
  }
  #menu h1 { margin:0 0 6px 0; font-size:28px }
  #menu p { margin:0 0 14px 0; opacity:.9 }
  .menu-btn {
    background:var(--accent); color:#fff; border:none; cursor:pointer;
    padding:12px 22px; border-radius:12px; font-size:18px; width:220px;
    box-shadow:0 6px 18px rgba(0,0,0,.25);
  }
  /* √úst bar */
  #header {
    position:sticky; top:0; z-index:4; display:none;
    background: rgba(0,0,0,.55); backdrop-filter: blur(6px);
    padding:10px; display:flex; gap:10px; align-items:center; justify-content:center;
    box-shadow:0 2px 10px rgba(0,0,0,.25);
  }
  .badge {
    display:inline-flex; align-items:center; gap:8px;
    background:#00000066; border:1px solid #ffffff29;
    padding:6px 10px; border-radius:999px; font-weight:700; font-size:14px;
  }
  .menu-toggle {
    margin-left:auto;
    background:#ffffff22; border:1px solid #ffffff33; color:#fff;
    padding:6px 10px; border-radius:999px; cursor:pointer;
  }
  /* Oyun alanƒ± */
  #board {
    display:none;
    grid-template-columns: repeat(3, 1fr);
    gap:10px; padding:12px; justify-items:center;
    height: calc(100dvh - 70px); overflow-y:auto;
    position: relative;
    z-index: 1;
  }
  .card {
    width:30vw; max-width:120px; aspect-ratio:1/1;
    border-radius:14px; overflow:hidden; cursor:pointer; perspective:900px;
    box-shadow: 0 6px 18px rgba(0,0,0,.25);
  }
  .inner {
    width:100%; height:100%; transform-style:preserve-3d;
    transition: transform .38s cubic-bezier(.2,.8,.2,1), filter .2s;
  }
  .flipped .inner { transform: rotateY(180deg); }
  .front, .back {
    position:absolute; inset:0; backface-visibility:hidden; border-radius:14px;
  }
  .front { transform: rotateY(180deg); }
  .front img { width:100%; height:100%; object-fit:cover; }
  .back {
    background-color:#d62828;
    background-image:
      repeating-linear-gradient(45deg,#fff 0px,#fff 3px,transparent 3px,transparent 10px),
      repeating-linear-gradient(-45deg,#fff 0px,#fff 3px,transparent 3px,transparent 10px);
    background-size:20px 20px; border:2px solid #fff;
  }
  /* Durdurma men√ºs√º */
  #pauseMenu {
    position:fixed; inset:0; display:none; flex-direction:column; gap:14px;
    justify-content:center; align-items:center; text-align:center;
    background:rgba(0,0,0,.65); backdrop-filter: blur(8px); z-index:10;
  }
  #pauseMenu button {
    background:var(--accent); color:#fff; border:none; cursor:pointer;
    padding:12px 22px; border-radius:12px; font-size:18px; width:220px;
  }
</style>
</head>
<body>

<canvas id="bubbles"></canvas>

<!-- üìå Ana Men√º -->
<section id="menu">
  <h1>üß† Hafƒ±za E≈üle≈ütirme</h1>
  <p>10 seviye ¬∑ durdurma ¬∑ yeni oyun</p>
  <button class="menu-btn" id="playBtn">üéÆ Oyuna Ba≈üla</button>
</section>

<!-- üïπ √úst Bar -->
<header id="header" style="display:none">
  <div class="badge">Seviye: <span id="levelDisplay">1</span></div>
  <div class="badge">Puan: <span id="scoreDisplay">0</span></div>
  <button class="menu-toggle" id="gameMenuBtn">‚ò∞ Men√º</button>
</header>

<!-- üß† Oyun Alanƒ± -->
<main id="board"></main>

<!-- üõë Durdurma Men√ºs√º -->
<section id="pauseMenu">
  <h2>‚è∏ Oyun Durduruldu</h2>
  <button id="resumeBtn">‚ñ∂Ô∏è Devam Et</button>
  <button id="restartBtn">üîÑ Yeni Oyun</button>
  <button id="backToMainBtn">üè† Ana Men√º</button>
</section>

<script>
const IMAGE_PATH = "./images/";
const TOTAL_IMAGES = 41;
const TOTAL_LEVELS = 10;
const MATCH_SCORE = 10;
const FAIL_PENALTY = 2;

let level=1, score=0, flipped=[], matchedPairs=0, paused=false;

const board = document.getElementById('board');
const levelEl = document.getElementById('levelDisplay');
const scoreEl = document.getElementById('scoreDisplay');
const menu = document.getElementById('menu');
const pauseMenu = document.getElementById('pauseMenu');

document.getElementById('playBtn').onclick = startGame;
document.getElementById('gameMenuBtn').onclick = pauseGame;
document.getElementById('resumeBtn').onclick = resumeGame;
document.getElementById('restartBtn').onclick = restartGame;
document.getElementById('backToMainBtn').onclick = backToMain;

function startGame(){
  menu.style.display='none';
  document.getElementById('header').style.display='flex';
  board.style.display='grid';
  level=1; score=0;
  startLevel();
}

function startLevel(){
  board.innerHTML='';
  flipped=[]; matchedPairs=0;
  levelEl.textContent=level;
  scoreEl.textContent=score;

  const pairCount = Math.min(level+1, Math.floor(TOTAL_IMAGES/2));
  const selected = pickImages(pairCount);
  const cards = shuffle([...selected,...selected]);
  cards.forEach(src=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="inner">
        <div class="front"><img src="${src}" alt=""></div>
        <div class="back"></div>
      </div>`;
    card.addEventListener('click',()=>flipCard(card,src));
    board.appendChild(card);
  });
}

function pickImages(count){
  const all = Array.from({length:TOTAL_IMAGES},(_,i)=>`${IMAGE_PATH}${i+1}.jpg`);
  const chosen=[];
  while(chosen.length<count && all.length>0){
    const idx=Math.floor(Math.random()*all.length);
    chosen.push(all.splice(idx,1)[0]);
  }
  return chosen;
}

function flipCard(card,src){
  if(paused) return;
  if(card.classList.contains('flipped')||flipped.length===2) return;
  card.classList.add('flipped');
  flipped.push({card,src});
  if(flipped.length===2){
    const[a,b]=flipped;
    if(a.src===b.src){
      setTimeout(()=>{
        a.card.classList.add('matched');
        b.card.classList.add('matched');
        flipped=[];
        matchedPairs++;
        score+=MATCH_SCORE;
        scoreEl.textContent=score;
        if(matchedPairs===level+1){
          level++;
          if(level>TOTAL_LEVELS){ alert(`üéâ Oyun bitti! Puan: ${score}`); backToMain(); }
          else setTimeout(startLevel,1000);
        }
      },280);
    } else {
      setTimeout(()=>{
        a.card.classList.remove('flipped');
        b.card.classList.remove('flipped');
        flipped=[];
        score=Math.max(0,score-FAIL_PENALTY);
        scoreEl.textContent=score;
      },2000); // üëà 2000 ms bekleme
    }
  }
}

function pauseGame(){
  paused=true;
  pauseMenu.style.display='flex';
}

function resumeGame(){
  paused=false;
  pauseMenu.style.display='none';
}

function restartGame(){
  paused=false;
  pauseMenu.style.display='none';
  level=1; score=0;
  startLevel();
}

function backToMain(){
  paused=false;
  pauseMenu.style.display='none';
  menu.style.display='flex';
  document.getElementById('header').style.display='none';
  board.style.display='none';
}

function shuffle(arr){
  let a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

/* Baloncuk efekti */
const bubbleCanvas = document.getElementById('bubbles');
const bctx = bubbleCanvas.getContext('2d');
let bubbles = [];
function resizeBubbles(){
  bubbleCanvas.width = window.innerWidth;
  bubbleCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeBubbles); resizeBubbles();
const BUBBLE_COUNT = 40;
for(let i=0;i<BUBBLE_COUNT;i++){
  bubbles.push({x:Math.random()*bubbleCanvas.width,y:Math.random()*bubbleCanvas.height,r:Math.random()*10+6,s:Math.random()*0.6+0.25,a:Math.random()*0.5+0.25});
}
function drawBubbles(){
  bctx.clearRect(0,0,bubbleCanvas.width,bubbleCanvas.height);
  bubbles.forEach(b=>{
    bctx.beginPath();
    bctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    bctx.fillStyle=`rgba(255,255,255,${b.a})`;
    bctx.fill();
    b.y -= b.s;
    if(b.y+b.r<0){ b.y=bubbleCanvas.height+b.r; b.x=Math.random()*bubbleCanvas.width; }
  });
  requestAnimationFrame(drawBubbles);
}
drawBubbles();
</script>
</body>
</html>
